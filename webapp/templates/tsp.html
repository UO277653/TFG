<!DOCTYPE html>
<html>
<head>
    <title>TFG</title>
    <script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>
    <link rel="stylesheet" type="text/css" href="../static/css/style.css">
</head>
<body>

<nav class="navbar">
    <ul>
        <li><a href="/">Home</a></li>
        <li><a href="/maxcut">Max-Cut</a></li>
        <li><a href="/tsp">TSP</a></li>
        <li><a href="/knapsack">Knapsack</a></li>
        <li><a href="/graphColor">Graph coloring</a></li>
    </ul>
</nav>

<div id="problem-container">
   <table>
       <tr>
           <td id="imagenProblema"><img src="../static/img/tspImg.png" alt="Imagen del problema TSP"></td>
           <td>
               <h1>TSP</h1>
               <p>El Problema del Viajante de Comercio (TSP, por sus siglas en inglés) es un desafío matemático y de optimización que busca encontrar la ruta más corta posible para que un viajante visite un conjunto de ciudades y regrese a su punto de partida. En este problema, se supone que el viajante debe visitar cada ciudad exactamente una vez.<br> <br>

                   El objetivo es minimizar la distancia total recorrida, lo que implica encontrar el recorrido óptimo que pase por todas las ciudades sin repetir ninguna, minimizando la distancia total recorrida.<br> <br>

                   El TSP tiene importantes aplicaciones en logística, planificación de rutas, diseño de circuitos integrados, programación de producción y muchas otras áreas donde la optimización de la secuencia de visitas es fundamental.<br> <br>

                   El problema es conocido por ser NP-duro, lo que significa que no se ha encontrado una solución eficiente que funcione en todos los casos. Sin embargo, existen algoritmos y técnicas heurísticas que pueden proporcionar soluciones aproximadas de buena calidad para casos prácticos.<br> <br>

                   Resolver el TSP es de gran interés debido a su complejidad y aplicaciones prácticas, y ha sido objeto de estudio e investigación durante décadas.<br>

               <p> <b>Interpretación de los resultados</b> <br>
                   En este caso el número de variables que se generan en todos los métodos es el mismo. Se genera uno por cada combinación de nodo y posición que puede haber. Esto se puede visualizar mejor con este ejemplo de 4 nodos </p>

               <h3> <i> x0: 1, x1: 0, x2: 0, x3: 0, x4: 0, x5: 0, x6: 0, x7: 1, x8: 0, x9: 1, x10: 0, x11: 0, x12: 0, x13: 0, x14: 1, x15: 0. </i> </h3>

               <p>En este resultado de ejemplo, se comienza en el primer nodo, por eso la primera variable asociada a él tiene el valor 1 y las otras tres 0, luego se visita el tercero, después el cuarto y por último el segundo. <br> <br>

                   <b>Formato de los archivos </b><br>
                   A continuación se especifica el formato para cargar problemas a través de un archivo .txt. Está compuesto de las siguientes 3 líneas<br> <br>

               <table class="formatoProblema">
                   <tr>
                       <th>Dato de la línea</th>
                       <th>Ejemplo</th>
                   </tr>
                   <tr>
                       <td>Nº de nodos</td>
                       <td>4</td>
                   </tr>
                   <tr>
                       <td>Nº de repeticiones</td>
                       <td>1</td>
                   </tr>
                   <tr>
                       <td>Conexiones</td>
                       <td>0,1,2;0,2,1;0,3,3;1,2,4</td>
                   </tr>
               </table>
               </p>
            </td>
        </tr>
    </table>
</div>

<div class="flex">

<div id="resolverProblema">
    <fieldset id="cajaTSP">
        <legend>Problema</legend>
    <div id="cargarProblema">
        <div id="cargarProblemaTSPManual">

            <h2>Cargar problema a través de archivo</h2>

            <div class="flex">
            <input type="file" id="archivoTextoTSP" accept=".txt">
            <button onclick="cargarArchivoProblema()">Cargar</button>
            </div>
            
            <h2>Cargar problema manualmente</h2>
            <!-- Introducir número de nodos del grafo -->
            <div class="flex">
                <input type="text" name="numeroNodosTSP" id="numeroNodosTSP" placeholder="Número de nodos" oninput="validarNumero(this)">
                <button onclick="seleccionarNumeroNodosTSP()">Introducir</button> <button onclick="limpiarNumNodosTSP()">Limpiar</button>
            </div>
            <br>
            <div class="flex">
                <input type="text" name="numeroRepTSP" id="numeroRepTSP" placeholder="Número de repeticiones" oninput="validarNumero(this)">
                <button onclick="seleccionarNumeroRepsTSP()">Introducir</button> <button onclick="limpiarNumRepsTSP()">Limpiar</button>
            </div>
            <br>
            <h5>Agregar conexiones</h5>
            <div class="flex">
            <table>
                <tr>
                    <td>
                        <h5>Nodo 1</h5>
                        <input type="text" name="conexionTSPNodo1" id="conexionTSPNodo1" placeholder="Nodo 1">
                    </td>
                    <td>
                        <h5>Nodo 2</h5>
                        <input type="text" name="conexionTSPNodo2" id="conexionTSPNodo2" placeholder="Nodo 2">
                    </td>
                </tr>
                <tr>
                    <td colspan="2">
                        <h5>Valor</h5>
                        <div class="flex">
                        <input class="reducido" type="text" name="conexionTSPValor" id="conexionTSPValor" placeholder="Valor" oninput="validarNumero(this)">
                        <button onclick="agregarConexionTSP()">Agregar conexión</button> <button onclick="limpiarConexionesTSP()">Limpiar</button>
                        </div>
                    </td>
                </tr>
            </table>
            </div>
                <br>
        </div>
        <div id="cargarProblemaTSPArchivo">
            <div>
                <h2>Resolver el problema</h2>
                <div class="flex">
                <select class="solver" name="solver" id="solver">
                    <option value="simuladorLocal">Ejecutar en simulador local</option>
                    <option value="simuladorRemoto">Ejecutar en simulador remoto</option>
                    <option value="ordenadorReal">Ejecutar en ordenador real</option>
                    <option value="annealer">Ejecutar en annealer</option>
                    <option value="annealerSimulatedAnnealingSolver">Ejecutar con simmulated annealing solver</option>
                    <option value="annealerTabuSolver">Ejecutar con tabu solver</option>
                    <option value="annealerSteepestDescentSolver">Ejecutar con steepest descent solver</option>
                </select>
                    <button type="submit" class="btn btn-primary" id="comoResolver">Elegir</button>
                </div>
            </div>
            <div>
                <h2>Datos del problema</h2>
                <div id="datosProblemaTSP">
                    <h5>Número de nodos: <h5 id="txtNumNodosTSP"></h5></h5>
                    <h5>Número de repeticiones: <h5 id="txtNumRepTSP"></h5> </h5>
                    <h5>Conexiones: <h5 id="txtConexTSP"></h5> </h5>
                </div>
            </div>
        </div>
    </div>
    </fieldset>
</div>
    <div id="result">
        <fieldset id="cajaResultado">
            <legend>Salida</legend>
            <h5 class="error" id="error_componente_conexion">Falta un componente de la conexión</h5>
            <h5 class="error" id="error_datosIncompletos_TSP">Los parámetros introducidos en el problema no son correctos o completos.<br><br>
            Por favor, asegúrese de que el número de nodos y de repeticiones es mayor de 0, y de que hay conexiones entre nodos.</h5>
        </fieldset>
    </div>
</div>

<footer class="flex">
    <img src="../static/img/logouniovi.png" alt="Logo de la Universidad de Oviedo">
    <div class="grid">
        <p class="texto-footer">Autor: Stelian Adrian Stanci</p>
        <p class="texto-footer">Tutor: Elías Fernández-Combarro Álvarez</p>
    </div>
    <img src="../static/img/logoeii.png" alt="Logo de la Escuela de Ingeniería Informática">
</footer>

<script src="{{ url_for('static', filename='js/scriptTSP.js') }}"></script>
<script src="{{ url_for('static', filename='js/util.js') }}"></script>

</body>
</html>
